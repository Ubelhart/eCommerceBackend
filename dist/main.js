(()=>{var e={2289:(e,t,r)=>{var n={};e.exports=n,n.themes={};var s=r(3837),o=n.styles=r(8982),i=Object.defineProperties,a=new RegExp(/[\r\n]+/g);n.supportsColor=r(8136).supportsColor,void 0===n.enabled&&(n.enabled=!1!==n.supportsColor()),n.enable=function(){n.enabled=!0},n.disable=function(){n.enabled=!1},n.stripColors=n.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")},n.stylize=function(e,t){if(!n.enabled)return e+"";var r=o[t];return!r&&t in n?n[t](e):r.open+e+r.close};var u=/[|\\{}()[\]^$+*?.]/g;function c(e){var t=function e(){return f.apply(e,arguments)};return t._styles=e,t.__proto__=h,t}var l,d=(l={},o.grey=o.gray,Object.keys(o).forEach((function(e){o[e].closeRe=new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(u,"\\$&")}(o[e].close),"g"),l[e]={get:function(){return c(this._styles.concat(e))}}})),l),h=i((function(){}),d);function f(){var e=Array.prototype.slice.call(arguments),t=e.map((function(e){return null!=e&&e.constructor===String?e:s.inspect(e)})).join(" ");if(!n.enabled||!t)return t;for(var r=-1!=t.indexOf("\n"),i=this._styles,u=i.length;u--;){var c=o[i[u]];t=c.open+t.replace(c.closeRe,c.open)+c.close,r&&(t=t.replace(a,(function(e){return c.close+e+c.open})))}return t}n.setTheme=function(e){if("string"!=typeof e)for(var t in e)!function(t){n[t]=function(r){if("object"==typeof e[t]){var s=r;for(var o in e[t])s=n[e[t][o]](s);return s}return n[e[t]](r)}}(t);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var p=function(e,t){var r=t.split("");return(r=r.map(e)).join("")};for(var g in n.trap=r(8763),n.zalgo=r(750),n.maps={},n.maps.america=r(6278)(n),n.maps.zebra=r(848)(n),n.maps.rainbow=r(8823)(n),n.maps.random=r(9353)(n),n.maps)!function(e){n[e]=function(t){return p(n.maps[e],t)}}(g);i(n,function(){var e={};return Object.keys(d).forEach((function(t){e[t]={get:function(){return c([t])}}})),e}())},8763:e=>{e.exports=function(e,t){var r="";e=(e=e||"Run the trap, drop the bass").split("");var n={a:["@","ƒÑ","»∫","…Ö","Œî","Œõ","–î"],b:["√ü","∆Å","…É","…Æ","Œ≤","‡∏ø"],c:["¬©","»ª","œæ"],d:["√ê","∆ä","‘Ä","‘Å","‘Ç","‘É"],e:["√ã","ƒï","∆é","…ò","Œ£","Œæ","“º","‡©¨"],f:["”∫"],g:["…¢"],h:["ƒ¶","∆ï","“¢","“∫","”á","‘ä"],i:["‡ºè"],j:["ƒ¥"],k:["ƒ∏","“†","”É","‘û"],l:["ƒπ"],m:[" ç","”ç","”é","‘†","‘°","‡µ©"],n:["√ë","≈ã","∆ù","Õ∂","Œ†","“ä"],o:["√ò","√µ","√∏","«æ"," ò","—∫","◊ù","€ù","‡πè"],p:["«∑","“é"],q:["‡ßç"],r:["¬Æ","∆¶","»ê","…å"," Ä","–Ø"],s:["¬ß","œû","œü","œ®"],t:["≈Å","≈¶","Õ≥"],u:["∆±","’ç"],v:["◊ò"],w:["–®","—†","—º","‡µ∞"],x:["“≤","”æ","”º","”Ω"],y:["¬•","“∞","”ã"],z:["∆µ","…Ä"]};return e.forEach((function(e){e=e.toLowerCase();var t=n[e]||[" "],s=Math.floor(Math.random()*t.length);r+=void 0!==n[e]?n[e][s]:e})),r}},750:e=>{e.exports=function(e,t){e=e||"   he is here   ";var r={up:["Ãç","Ãé","ÃÑ","ÃÖ","Ãø","Ãë","ÃÜ","Ãê","Õí","Õó","Õë","Ãá","Ãà","Ãä","ÕÇ","Ãì","Ãà","Õä","Õã","Õå","ÃÉ","ÃÇ","Ãå","Õê","ÃÄ","ÃÅ","Ãã","Ãè","Ãí","Ãì","Ãî","ÃΩ","Ãâ","Õ£","Õ§","Õ•","Õ¶","Õß","Õ®","Õ©","Õ™","Õ´","Õ¨","Õ≠","ÕÆ","ÕØ","Ãæ","Õõ","ÕÜ","Ãö"],down:["Ãñ","Ãó","Ãò","Ãô","Ãú","Ãù","Ãû","Ãü","Ã†","Ã§","Ã•","Ã¶","Ã©","Ã™","Ã´","Ã¨","Ã≠","ÃÆ","ÃØ","Ã∞","Ã±","Ã≤","Ã≥","Ãπ","Ã∫","Ãª","Ãº","ÕÖ","Õá","Õà","Õâ","Õç","Õé","Õì","Õî","Õï","Õñ","Õô","Õö","Ã£"],mid:["Ãï","Ãõ","ÃÄ","ÃÅ","Õò","Ã°","Ã¢","Ãß","Ã®","Ã¥","Ãµ","Ã∂","Õú","Õù","Õû","Õü","Õ†","Õ¢","Ã∏","Ã∑","Õ°"," “â"]},n=[].concat(r.up,r.down,r.mid);function s(e){return Math.floor(Math.random()*e)}function o(e){var t=!1;return n.filter((function(r){t=r===e})),t}return function(e,t){var n,i,a="";for(i in(t=t||{}).up=void 0===t.up||t.up,t.mid=void 0===t.mid||t.mid,t.down=void 0===t.down||t.down,t.size=void 0!==t.size?t.size:"maxi",e=e.split(""))if(!o(i)){switch(a+=e[i],n={up:0,down:0,mid:0},t.size){case"mini":n.up=s(8),n.mid=s(2),n.down=s(8);break;case"maxi":n.up=s(16)+3,n.mid=s(4)+1,n.down=s(64)+3;break;default:n.up=s(8)+1,n.mid=s(6)/2,n.down=s(8)+1}var u=["up","mid","down"];for(var c in u)for(var l=u[c],d=0;d<=n[l];d++)t[l]&&(a+=r[l][s(r[l].length)])}return a}(e,t)}},6278:e=>{e.exports=function(e){return function(t,r,n){if(" "===t)return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},8823:e=>{e.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,s){return" "===r?r:e[t[n++%t.length]](r)}}},9353:e=>{e.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,s){return" "===r?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}},848:e=>{e.exports=function(e){return function(t,r,n){return r%2==0?t:e.inverse(t)}}},8982:e=>{var t={};e.exports=t;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach((function(e){var n=r[e],s=t[e]=[];s.open="["+n[0]+"m",s.close="["+n[1]+"m"}))},3719:e=>{"use strict";e.exports=function(e,t){var r=(t=t||process.argv).indexOf("--"),n=/^-{1,2}/.test(e)?"":"--",s=t.indexOf(n+e);return-1!==s&&(-1===r||s<r)}},8136:(e,t,r)=>{"use strict";var n=r(37),s=r(3719),o=process.env,i=void 0;function a(e){var t=function(e){if(!1===i)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!e.isTTY&&!0!==i)return 0;var t=i?1:0;if("win32"===process.platform){var r=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in o}))||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in o){var a=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}s("no-color")||s("no-colors")||s("color=false")?i=!1:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(i=!0),"FORCE_COLOR"in o&&(i=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},3645:(e,t,r)=>{var n=r(2289);e.exports=n},4099:e=>{var t=[],r=[],n=function(){};function s(e){return!~t.indexOf(e)&&(t.push(e),!0)}function o(e){n=e}function i(e){for(var r=[],n=0;n<t.length;n++)if(t[n].async)r.push(t[n]);else if(t[n](e))return!0;return!!r.length&&new Promise((function(t){Promise.all(r.map((function(t){return t(e)}))).then((function(e){t(e.some(Boolean))}))}))}function a(e){return!~r.indexOf(e)&&(r.push(e),!0)}function u(){n.apply(n,arguments)}function c(e){for(var t=0;t<r.length;t++)e=r[t].apply(r[t],arguments);return e}function l(e,t){var r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e}function d(e){return e.enabled=!1,e.modify=a,e.set=o,e.use=s,l((function(){return!1}),e)}function h(e){return e.enabled=!0,e.modify=a,e.set=o,e.use=s,l((function(){var t=Array.prototype.slice.call(arguments,0);return u.call(u,e,c(t,e)),!0}),e)}e.exports=function(e){return e.introduce=l,e.enabled=i,e.process=c,e.modify=a,e.write=u,e.nope=d,e.yep=h,e.set=o,e.use=s,e}},3420:(e,t,r)=>{e.exports=r(3601)},3601:(e,t,r)=>{var n=r(4099)((function e(t,r){return(r=r||{}).namespace=t,r.prod=!0,r.dev=!1,r.force||e.force?e.yep(r):e.nope(r)}));e.exports=n},4409:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.isAsync)(e)?function(...t){const r=t.pop();return a(e.apply(this,t),r)}:(0,n.default)((function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}if(n&&"function"==typeof n.then)return a(n,r);r(null,n)}))};var n=i(r(3519)),s=i(r(3111)),o=r(8993);function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e.then((e=>{u(t,null,e)}),(e=>{u(t,e&&e.message?e:new Error(e))}))}function u(e,t,r){try{e(t,r)}catch(e){(0,s.default)((e=>{throw e}),e)}}e.exports=t.default},1846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(5616)),s=l(r(1605)),o=l(r(7388)),i=l(r(6979)),a=l(r(3362)),u=l(r(8993)),c=l(r(2795));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){r=(0,i.default)(r);var n=0,o=0,{length:u}=e,c=!1;function l(e,t){!1===e&&(c=!0),!0!==c&&(e?r(e):++o!==u&&t!==s.default||r(null))}for(0===u&&r(null);n<u;n++)t(e[n],n,(0,a.default)(l))}function h(e,t,r){return(0,o.default)(e,1/0,t,r)}t.default=(0,c.default)((function(e,t,r){return((0,n.default)(e)?d:h)(e,(0,u.default)(t),r)}),3),e.exports=t.default},7388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(6954)),s=i(r(8993)),o=i(r(2795));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.default)((function(e,t,r,o){return(0,n.default)(t)(e,(0,s.default)(r),o)}),4),e.exports=t.default},667:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(7388)),s=o(r(2795));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,s.default)((function(e,t,r){return(0,n.default)(e,1,t,r)}),3),e.exports=t.default},8058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(1846)),s=a(r(6529)),o=a(r(8993)),i=a(r(2795));function a(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((function(e,t,r){return(0,n.default)(e,(0,s.default)((0,o.default)(t)),r)}),3),e.exports=t.default},8617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){let o=!1,i=!1,a=!1,u=0,c=0;function l(){u>=t||a||o||(a=!0,e.next().then((({value:e,done:t})=>{if(!i&&!o){if(a=!1,t)return o=!0,void(u<=0&&n(null));u++,r(e,c,d),c++,l()}})).catch(h))}function d(e,t){if(u-=1,!i)return e?h(e):!1===e?(o=!0,void(i=!0)):t===s.default||o&&u<=0?(o=!0,n(null)):void l()}function h(e){i||(a=!1,o=!0,n(e))}l()};var n,s=(n=r(1605))&&n.__esModule?n:{default:n};e.exports=t.default},2795:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=e.length){if(!t)throw new Error("arity is undefined");return function(...r){return"function"==typeof r[t-1]?e.apply(this,r):new Promise(((n,s)=>{r[t-1]=(e,...t)=>{if(e)return s(e);n(t.length>1?t:t[0])},e.apply(this,r)}))}},e.exports=t.default},1605:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default},6954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(6979)),s=c(r(9733)),o=c(r(3362)),i=r(8993),a=c(r(8617)),u=c(r(1605));function c(e){return e&&e.__esModule?e:{default:e}}t.default=e=>(t,r,c)=>{if(c=(0,n.default)(c),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return c(null);if((0,i.isAsyncGenerator)(t))return(0,a.default)(t,e,r,c);if((0,i.isAsyncIterable)(t))return(0,a.default)(t[Symbol.asyncIterator](),e,r,c);var l=(0,s.default)(t),d=!1,h=!1,f=0,p=!1;function g(e,t){if(!h)if(f-=1,e)d=!0,c(e);else if(!1===e)d=!0,h=!0;else{if(t===u.default||d&&f<=0)return d=!0,c(null);p||m()}}function m(){for(p=!0;f<e&&!d;){var t=l();if(null===t)return d=!0,void(f<=0&&c(null));f+=1,r(t.value,t.key,(0,o.default)(g))}p=!1}m()},e.exports=t.default},7818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()},e.exports=t.default},3519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(...t){var r=t.pop();return e.call(this,t,r)}},e.exports=t.default},5616:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&"number"==typeof e.length&&e.length>=0&&e.length%1==0},e.exports=t.default},9733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,n.default)(e))return function(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}(e);var t,r,o,i,a=(0,s.default)(e);return a?function(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(a):(r=(t=e)?Object.keys(t):[],o=-1,i=r.length,function e(){var n=r[++o];return"__proto__"===n?e():o<i?{value:t[n],key:n}:null})};var n=o(r(5616)),s=o(r(7818));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},6979:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(...t){if(null!==e){var r=e;e=null,r.apply(this,t)}}return Object.assign(t,e),t},e.exports=t.default},3362:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(...t){if(null===e)throw new Error("Callback was already called.");var r=e;e=null,r.apply(this,t)}},e.exports=t.default},3409:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(5616)),s=i(r(8993)),o=i(r(2795));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.default)(((e,t,r)=>{var o=(0,n.default)(t)?[]:{};e(t,((e,t,r)=>{(0,s.default)(e)(((e,...n)=>{n.length<2&&([n]=n),o[t]=n,r(e)}))}),(e=>r(e,o)))}),3),e.exports=t.default},3111:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fallback=i,t.wrap=a;var r,n=t.hasQueueMicrotask="function"==typeof queueMicrotask&&queueMicrotask,s=t.hasSetImmediate="function"==typeof setImmediate&&setImmediate,o=t.hasNextTick="object"==typeof process&&"function"==typeof process.nextTick;function i(e){setTimeout(e,0)}function a(e){return(t,...r)=>e((()=>t(...r)))}r=n?queueMicrotask:s?setImmediate:o?process.nextTick:i,t.default=a(r)},6529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(t,r,n)=>e(t,n)},e.exports=t.default},8993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=t.isAsyncGenerator=t.isAsync=void 0;var n,s=(n=r(4409))&&n.__esModule?n:{default:n};function o(e){return"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){if("function"!=typeof e)throw new Error("expected a function");return o(e)?(0,s.default)(e):e},t.isAsync=o,t.isAsyncGenerator=function(e){return"AsyncGenerator"===e[Symbol.toStringTag]},t.isAsyncIterable=function(e){return"function"==typeof e[Symbol.asyncIterator]}},8415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,n.default)(s.default,e,t)};var n=o(r(3409)),s=o(r(667));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},9432:(e,t,r)=>{"use strict";r.r(t),r.d(t,{assign:()=>l,default:()=>C,defaultI18n:()=>p,format:()=>S,parse:()=>$,setGlobalDateI18n:()=>m,setGlobalDateMasks:()=>O});var n=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,s="\\d\\d?",o="\\d\\d",i="[^\\s]+",a=/\[([^]*?)\]/gm;function u(e,t){for(var r=[],n=0,s=e.length;n<s;n++)r.push(e[n].substr(0,t));return r}var c=function(e){return function(t,r){var n=r[e].map((function(e){return e.toLowerCase()})),s=n.indexOf(t.toLowerCase());return s>-1?s:null}};function l(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,s=t;n<s.length;n++){var o=s[n];for(var i in o)e[i]=o[i]}return e}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],f=u(h,3),p={dayNamesShort:u(d,3),dayNames:d,monthNamesShort:f,monthNames:h,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},g=l({},p),m=function(e){return g=l(g,e)},v=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},y=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},_={D:function(e){return String(e.getDate())},DD:function(e){return y(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return y(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return y(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return y(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return y(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return y(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return y(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return y(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return y(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return y(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return y(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+y(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+y(Math.floor(Math.abs(t)/60),2)+":"+y(Math.abs(t)%60,2)}},b=function(e){return+e-1},w=[null,s],x=[null,i],E=["isPm",i,function(e,t){var r=e.toLowerCase();return r===t.amPm[0]?0:r===t.amPm[1]?1:null}],j=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var r=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?r:-r}return 0}],P={D:["day",s],DD:["day",o],Do:["day","\\d\\d?[^\\s]+",function(e){return parseInt(e,10)}],M:["month",s,b],MM:["month",o,b],YY:["year",o,function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour",s,void 0,"isPm"],hh:["hour",o,void 0,"isPm"],H:["hour",s],HH:["hour",o],m:["minute",s],mm:["minute",o],s:["second",s],ss:["second",o],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond",o,function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:w,dd:w,ddd:x,dddd:x,MMM:["month",i,c("monthNamesShort")],MMMM:["month",i,c("monthNames")],a:E,A:E,ZZ:j,Z:j},M={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},O=function(e){return l(M,e)},S=function(e,t,r){if(void 0===t&&(t=M.default),void 0===r&&(r={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var s=[];t=(t=M[t]||t).replace(a,(function(e,t){return s.push(t),"@@@"}));var o=l(l({},g),r);return(t=t.replace(n,(function(t){return _[t](e,o)}))).replace(/@@@/g,(function(){return s.shift()}))};function $(e,t,r){if(void 0===r&&(r={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=M[t]||t,e.length>1e3)return null;var s={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},o=[],i=[],u=t.replace(a,(function(e,t){return i.push(v(t)),"@@@"})),c={},d={};u=v(u).replace(n,(function(e){var t=P[e],r=t[0],n=t[1],s=t[3];if(c[r])throw new Error("Invalid format. "+r+" specified twice in format");return c[r]=!0,s&&(d[s]=!0),o.push(t),"("+n+")"})),Object.keys(d).forEach((function(e){if(!c[e])throw new Error("Invalid format. "+e+" is required in specified format")})),u=u.replace(/@@@/g,(function(){return i.shift()}));var h=e.match(new RegExp(u,"i"));if(!h)return null;for(var f,p=l(l({},g),r),m=1;m<h.length;m++){var y=o[m-1],_=y[0],b=y[2],w=b?b(h[m],p):+h[m];if(null==w)return null;s[_]=w}if(1===s.isPm&&null!=s.hour&&12!=+s.hour?s.hour=+s.hour+12:0===s.isPm&&12==+s.hour&&(s.hour=0),null==s.timezoneOffset){f=new Date(s.year,s.month,s.day,s.hour,s.minute,s.second,s.millisecond);for(var x=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],E=(m=0,x.length);m<E;m++)if(c[x[m][0]]&&s[x[m][0]]!==f[x[m][1]]())return null}else if(f=new Date(Date.UTC(s.year,s.month,s.day,s.hour,s.minute-s.timezoneOffset,s.second,s.millisecond)),s.month>11||s.month<0||s.day>31||s.day<1||s.hour>23||s.hour<0||s.minute>59||s.minute<0||s.second>59||s.second<0)return null;return f}const C={format:S,parse:$,defaultI18n:p,setGlobalDateI18n:m,setGlobalDateMasks:O}},2296:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){if("string"==typeof e.displayName&&e.constructor.name)return e.displayName;if("string"==typeof e.name&&e.name)return e.name;if("object"==typeof e&&e.constructor&&"string"==typeof e.constructor.name)return e.constructor.name;var r=e.toString(),n=t.call(e).slice(8,-1);return(r="Function"===n?r.substring(r.indexOf("(")+1,r.indexOf(")")):n)||"anonymous"}},6281:(e,t,r)=>{"use strict";const n=r(9235);e.exports=n((e=>(e.message=`\t${e.message}`,e)))},153:(e,t,r)=>{"use strict";const{Colorizer:n}=r(8580),{Padder:s}=r(6566),{configs:o,MESSAGE:i}=r(5396);class a{constructor(e={}){e.levels||(e.levels=o.cli.levels),this.colorizer=new n(e),this.padder=new s(e),this.options=e}transform(e,t){return this.colorizer.transform(this.padder.transform(e,t),t),e[i]=`${e.level}:${e.message}`,e}}e.exports=e=>new a(e),e.exports.Format=a},8580:(e,t,r)=>{"use strict";const n=r(3645),{LEVEL:s,MESSAGE:o}=r(5396);n.enabled=!0;const i=/\s+/;class a{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){const t=Object.keys(e).reduce(((t,r)=>(t[r]=i.test(e[r])?e[r].split(i):e[r],t)),{});return a.allColors=Object.assign({},a.allColors||{},t),a.allColors}addColors(e){return a.addColors(e)}colorize(e,t,r){if(void 0===r&&(r=t),!Array.isArray(a.allColors[e]))return n[a.allColors[e]](r);for(let t=0,s=a.allColors[e].length;t<s;t++)r=n[a.allColors[e][t]](r);return r}transform(e,t){return t.all&&"string"==typeof e[o]&&(e[o]=this.colorize(e[s],e.level,e[o])),(t.level||t.all||!t.message)&&(e.level=this.colorize(e[s],e.level)),(t.all||t.message)&&(e.message=this.colorize(e[s],e.level,e.message)),e}}e.exports=e=>new a(e),e.exports.Colorizer=e.exports.Format=a},2390:(e,t,r)=>{"use strict";const n=r(9235);function s(e){if(e.every(o))return t=>{let r=t;for(let t=0;t<e.length;t++)if(r=e[t].transform(r,e[t].options),!r)return!1;return r}}function o(e){if("function"!=typeof e.transform)throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join("\n"));return!0}e.exports=(...e)=>{const t=n(s(e)),r=t();return r.Format=t.Format,r},e.exports.cascade=s},1648:(e,t,r)=>{"use strict";const n=r(9235),{LEVEL:s,MESSAGE:o}=r(5396);e.exports=n(((e,{stack:t})=>{if(e instanceof Error){const r=Object.assign({},e,{level:e.level,[s]:e[s]||e.level,message:e.message,[o]:e[o]||e.message});return t&&(r.stack=e.stack),r}if(!(e.message instanceof Error))return e;const r=e.message;return Object.assign(e,r),e.message=r.message,e[o]=r.message,t&&(e.stack=r.stack),e}))},9235:e=>{"use strict";class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ${e.toString().split("\n")[0]}\n`),Error.captureStackTrace(this,t)}}e.exports=e=>{if(e.length>2)throw new t(e);function r(e={}){this.options=e}function n(e){return new r(e)}return r.prototype.transform=e,n.Format=r,n}},562:(e,t,r)=>{"use strict";const n=t.format=r(9235);function s(e,t){Object.defineProperty(n,e,{get:()=>t(),configurable:!0})}t.levels=r(7823),s("align",(function(){return r(6281)})),s("errors",(function(){return r(1648)})),s("cli",(function(){return r(153)})),s("combine",(function(){return r(2390)})),s("colorize",(function(){return r(8580)})),s("json",(function(){return r(3922)})),s("label",(function(){return r(3084)})),s("logstash",(function(){return r(3388)})),s("metadata",(function(){return r(2523)})),s("ms",(function(){return r(7560)})),s("padLevels",(function(){return r(6566)})),s("prettyPrint",(function(){return r(5894)})),s("printf",(function(){return r(8242)})),s("simple",(function(){return r(459)})),s("splat",(function(){return r(8102)})),s("timestamp",(function(){return r(6645)})),s("uncolorize",(function(){return r(9095)}))},3922:(e,t,r)=>{"use strict";const n=r(9235),{MESSAGE:s}=r(5396),o=r(7668);function i(e,t){return"bigint"==typeof t?t.toString():t}e.exports=n(((e,t)=>{const r=o.configure(t);return e[s]=r(e,t.replacer||i,t.space),e}))},3084:(e,t,r)=>{"use strict";const n=r(9235);e.exports=n(((e,t)=>t.message?(e.message=`[${t.label}] ${e.message}`,e):(e.label=t.label,e)))},7823:(e,t,r)=>{"use strict";const{Colorizer:n}=r(8580);e.exports=e=>(n.addColors(e.colors||e),e)},3388:(e,t,r)=>{"use strict";const n=r(9235),{MESSAGE:s}=r(5396),o=r(7668);e.exports=n((e=>{const t={};return e.message&&(t["@message"]=e.message,delete e.message),e.timestamp&&(t["@timestamp"]=e.timestamp,delete e.timestamp),t["@fields"]=e,e[s]=o(t),e}))},2523:(e,t,r)=>{"use strict";const n=r(9235);e.exports=n(((e,t={})=>{let r="metadata";t.key&&(r=t.key);let n=[];return t.fillExcept||t.fillWith||(n.push("level"),n.push("message")),t.fillExcept&&(n=t.fillExcept),n.length>0?function(e,t,r){const n=t.reduce(((t,r)=>(t[r]=e[r],delete e[r],t)),{}),s=Object.keys(e).reduce(((t,r)=>(t[r]=e[r],delete e[r],t)),{});return Object.assign(e,n,{[r]:s}),e}(e,n,r):t.fillWith?function(e,t,r){return e[r]=t.reduce(((t,r)=>(t[r]=e[r],delete e[r],t)),{}),e}(e,t.fillWith,r):e}))},7560:function(e,t,r){"use strict";const n=r(9235),s=r(3231);e.exports=n((e=>{const t=+new Date;return this.diff=t-(this.prevTime||t),this.prevTime=t,e.ms=`+${s(this.diff)}`,e}))},6566:(e,t,r)=>{"use strict";const{configs:n,LEVEL:s,MESSAGE:o}=r(5396);class i{constructor(e={levels:n.npm.levels}){this.paddings=i.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){const t=Object.keys(e).map((e=>e.length));return Math.max(...t)}static paddingForLevel(e,t,r){const n=r+1-e.length,s=Math.floor(n/t.length);return`${t}${t.repeat(s)}`.slice(0,n)}static paddingForLevels(e,t=" "){const r=i.getLongestLevel(e);return Object.keys(e).reduce(((e,n)=>(e[n]=i.paddingForLevel(n,t,r),e)),{})}transform(e,t){return e.message=`${this.paddings[e[s]]}${e.message}`,e[o]&&(e[o]=`${this.paddings[e[s]]}${e[o]}`),e}}e.exports=e=>new i(e),e.exports.Padder=e.exports.Format=i},5894:(e,t,r)=>{"use strict";const n=r(3837).inspect,s=r(9235),{LEVEL:o,MESSAGE:i,SPLAT:a}=r(5396);e.exports=s(((e,t={})=>{const r=Object.assign({},e);return delete r[o],delete r[i],delete r[a],e[i]=n(r,!1,t.depth||null,t.colorize),e}))},8242:(e,t,r)=>{"use strict";const{MESSAGE:n}=r(5396);class s{constructor(e){this.template=e}transform(e){return e[n]=this.template(e),e}}e.exports=e=>new s(e),e.exports.Printf=e.exports.Format=s},459:(e,t,r)=>{"use strict";const n=r(9235),{MESSAGE:s}=r(5396),o=r(7668);e.exports=n((e=>{const t=o(Object.assign({},e,{level:void 0,message:void 0,splat:void 0})),r=e.padding&&e.padding[e.level]||"";return e[s]="{}"!==t?`${e.level}:${r} ${e.message} ${t}`:`${e.level}:${r} ${e.message}`,e}))},8102:(e,t,r)=>{"use strict";const n=r(3837),{SPLAT:s}=r(5396),o=/%[scdjifoO%]/g,i=/%%/g;class a{constructor(e){this.options=e}_splat(e,t){const r=e.message,o=e[s]||e.splat||[],a=r.match(i),u=a&&a.length||0,c=t.length-u-o.length,l=c<0?o.splice(c,-1*c):[],d=l.length;if(d)for(let t=0;t<d;t++)Object.assign(e,l[t]);return e.message=n.format(r,...o),e}transform(e){const t=e.message,r=e[s]||e.splat;if(!r||!r.length)return e;const n=t&&t.match&&t.match(o);if(!n&&(r||r.length)){const t=r.length>1?r.splice(0):r,n=t.length;if(n)for(let r=0;r<n;r++)Object.assign(e,t[r]);return e}return n?this._splat(e,n):e}}e.exports=e=>new a(e)},6645:(e,t,r)=>{"use strict";const n=r(9432),s=r(9235);e.exports=s(((e,t={})=>(t.format&&(e.timestamp="function"==typeof t.format?t.format():n.format(new Date,t.format)),e.timestamp||(e.timestamp=(new Date).toISOString()),t.alias&&(e[t.alias]=e.timestamp),e)))},9095:(e,t,r)=>{"use strict";const n=r(3645),s=r(9235),{MESSAGE:o}=r(5396);e.exports=s(((e,t)=>(!1!==t.level&&(e.level=n.strip(e.level)),!1!==t.message&&(e.message=n.strip(e.message)),!1!==t.raw&&e[o]&&(e[o]=n.strip(e[o])),e)))},3138:(e,t,r)=>{"use strict";var n=r(2296);e.exports=function(e){var t,r=0;function s(){return r||(r=1,t=e.apply(this,arguments),e=null),t}return s.displayName=n(e),s}},7668:(e,t)=>{"use strict";const r=m();r.configure=m,r.stringify=r,r.default=r,t.stringify=r,t.configure=m,e.exports=r;const n=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/,s=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/g,o=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\"];function i(e){if(2===e.length){const t=e.charCodeAt(1);return`${e[0]}\\u${t.toString(16)}`}const t=e.charCodeAt(0);return o.length>t?o[t]:`\\u${t.toString(16)}`}function a(e){if(e.length<5e3&&!n.test(e))return e;if(e.length>100)return e.replace(s,i);let t="",r=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);if(34===s||92===s||s<32)t+=`${e.slice(r,n)}${o[s]}`,r=n+1;else if(s>=55296&&s<=57343){if(s<=56319&&n+1<e.length){const t=e.charCodeAt(n+1);if(t>=56320&&t<=57343){n++;continue}}t+=`${e.slice(r,n)}\\u${s.toString(16)}`,r=n+1}}return t+=e.slice(r),t}function u(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){const r=e[t];let n=t;for(;0!==n&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}const c=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array)),Symbol.toStringTag).get;function l(e){return void 0!==c.call(e)&&0!==e.length}function d(e,t,r){e.length<r&&(r=e.length);const n=","===t?"":" ";let s=`"0":${n}${e[0]}`;for(let o=1;o<r;o++)s+=`${t}"${o}":${n}${e[o]}`;return s}function h(e,t){if(e&&Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if("boolean"!=typeof r)throw new TypeError(`The "${t}" argument must be of type boolean`)}return void 0===r||r}function f(e,t){if(e&&Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if("number"!=typeof r)throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return void 0===r?1/0:r}function p(e){return 1===e?"1 item":`${e} items`}function g(e){const t=new Set;for(const r of e)"string"==typeof r?t.add(r):"number"==typeof r&&t.add(String(r));return t}function m(e){const t=function(e){if(e&&Object.prototype.hasOwnProperty.call(e,"circularValue")){var t=e.circularValue;if("string"==typeof t)return`"${t}"`;if(null==t)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(e),r=h(e,"bigint"),n=h(e,"deterministic"),s=f(e,"maximumDepth"),o=f(e,"maximumBreadth");function i(e,c,h,f,g,m){let v=c[e];switch("object"==typeof v&&null!==v&&"function"==typeof v.toJSON&&(v=v.toJSON(e)),v=f.call(c,e,v),typeof v){case"string":return`"${a(v)}"`;case"object":{if(null===v)return"null";if(-1!==h.indexOf(v))return t;let e="",r=",";const c=m;if(Array.isArray(v)){if(0===v.length)return"[]";if(s<h.length+1)return'"[Array]"';h.push(v),""!==g&&(e+=`\n${m+=g}`,r=`,\n${m}`);const t=Math.min(v.length,o);let n=0;for(;n<t-1;n++){const t=i(n,v,h,f,g,m);e+=void 0!==t?t:"null",e+=r}const a=i(n,v,h,f,g,m);return e+=void 0!==a?a:"null",v.length-1>o&&(e+=`${r}"... ${p(v.length-o-1)} not stringified"`),""!==g&&(e+=`\n${c}`),h.pop(),`[${e}]`}let y=Object.keys(v);const _=y.length;if(0===_)return"{}";if(s<h.length+1)return'"[Object]"';let b="",w="";""!==g&&(r=`,\n${m+=g}`,b=" ");let x=Math.min(_,o);l(v)&&(e+=d(v,r,o),y=y.slice(v.length),x-=v.length,w=r),n&&(y=u(y)),h.push(v);for(let t=0;t<x;t++){const n=y[t],s=i(n,v,h,f,g,m);void 0!==s&&(e+=`${w}"${a(n)}":${b}${s}`,w=r)}return _>o&&(e+=`${w}"...":${b}"${p(_-o)} not stringified"`,w=r),""!==g&&w.length>1&&(e=`\n${m}${e}\n${c}`),h.pop(),`{${e}}`}case"number":return isFinite(v)?String(v):"null";case"boolean":return!0===v?"true":"false";case"bigint":return r?String(v):void 0}}function c(e,n,i,u,l,d){switch("object"==typeof n&&null!==n&&"function"==typeof n.toJSON&&(n=n.toJSON(e)),typeof n){case"string":return`"${a(n)}"`;case"object":{if(null===n)return"null";if(-1!==i.indexOf(n))return t;const e=d;let r="",h=",";if(Array.isArray(n)){if(0===n.length)return"[]";if(s<i.length+1)return'"[Array]"';i.push(n),""!==l&&(r+=`\n${d+=l}`,h=`,\n${d}`);const t=Math.min(n.length,o);let a=0;for(;a<t-1;a++){const e=c(a,n[a],i,u,l,d);r+=void 0!==e?e:"null",r+=h}const f=c(a,n[a],i,u,l,d);return r+=void 0!==f?f:"null",n.length-1>o&&(r+=`${h}"... ${p(n.length-o-1)} not stringified"`),""!==l&&(r+=`\n${e}`),i.pop(),`[${r}]`}if(0===u.size)return"{}";i.push(n);let f="";""!==l&&(h=`,\n${d+=l}`,f=" ");let g="";for(const e of u){const t=c(e,n[e],i,u,l,d);void 0!==t&&(r+=`${g}"${a(e)}":${f}${t}`,g=h)}return""!==l&&g.length>1&&(r=`\n${d}${r}\n${e}`),i.pop(),`{${r}}`}case"number":return isFinite(n)?String(n):"null";case"boolean":return!0===n?"true":"false";case"bigint":return r?String(n):void 0}}function m(e,i,c,h,f){switch(typeof i){case"string":return`"${a(i)}"`;case"object":{if(null===i)return"null";if("function"==typeof i.toJSON){if("object"!=typeof(i=i.toJSON(e)))return m(e,i,c,h,f);if(null===i)return"null"}if(-1!==c.indexOf(i))return t;const r=f;if(Array.isArray(i)){if(0===i.length)return"[]";if(s<c.length+1)return'"[Array]"';c.push(i);let e=`\n${f+=h}`;const t=`,\n${f}`,n=Math.min(i.length,o);let a=0;for(;a<n-1;a++){const r=m(a,i[a],c,h,f);e+=void 0!==r?r:"null",e+=t}const u=m(a,i[a],c,h,f);return e+=void 0!==u?u:"null",i.length-1>o&&(e+=`${t}"... ${p(i.length-o-1)} not stringified"`),e+=`\n${r}`,c.pop(),`[${e}]`}let g=Object.keys(i);const v=g.length;if(0===v)return"{}";if(s<c.length+1)return'"[Object]"';const y=`,\n${f+=h}`;let _="",b="",w=Math.min(v,o);l(i)&&(_+=d(i,y,o),g=g.slice(i.length),w-=i.length,b=y),n&&(g=u(g)),c.push(i);for(let e=0;e<w;e++){const t=g[e],r=m(t,i[t],c,h,f);void 0!==r&&(_+=`${b}"${a(t)}": ${r}`,b=y)}return v>o&&(_+=`${b}"...": "${p(v-o)} not stringified"`,b=y),""!==b&&(_=`\n${f}${_}\n${r}`),c.pop(),`{${_}}`}case"number":return isFinite(i)?String(i):"null";case"boolean":return!0===i?"true":"false";case"bigint":return r?String(i):void 0}}function v(e,i,c){switch(typeof i){case"string":return`"${a(i)}"`;case"object":{if(null===i)return"null";if("function"==typeof i.toJSON){if("object"!=typeof(i=i.toJSON(e)))return v(e,i,c);if(null===i)return"null"}if(-1!==c.indexOf(i))return t;let r="";if(Array.isArray(i)){if(0===i.length)return"[]";if(s<c.length+1)return'"[Array]"';c.push(i);const e=Math.min(i.length,o);let t=0;for(;t<e-1;t++){const e=v(t,i[t],c);r+=void 0!==e?e:"null",r+=","}const n=v(t,i[t],c);return r+=void 0!==n?n:"null",i.length-1>o&&(r+=`,"... ${p(i.length-o-1)} not stringified"`),c.pop(),`[${r}]`}let h=Object.keys(i);const f=h.length;if(0===f)return"{}";if(s<c.length+1)return'"[Object]"';let g="",m=Math.min(f,o);l(i)&&(r+=d(i,",",o),h=h.slice(i.length),m-=i.length,g=","),n&&(h=u(h)),c.push(i);for(let e=0;e<m;e++){const t=h[e],n=v(t,i[t],c);void 0!==n&&(r+=`${g}"${a(t)}":${n}`,g=",")}return f>o&&(r+=`${g}"...":"${p(f-o)} not stringified"`),c.pop(),`{${r}}`}case"number":return isFinite(i)?String(i):"null";case"boolean":return!0===i?"true":"false";case"bigint":return r?String(i):void 0}}return function(e,t,r){if(arguments.length>1){let n="";if("number"==typeof r?n=" ".repeat(Math.min(r,10)):"string"==typeof r&&(n=r.slice(0,10)),null!=t){if("function"==typeof t)return i("",{"":e},[],t,n,"");if(Array.isArray(t))return c("",e,[],g(t),n,"")}if(0!==n.length)return m("",e,[],n,"")}return v("",e,[])}}},7911:(e,t)=>{function r(e){for(var t in e)this[t]=e[t]}t.get=function(e){var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var n={},s=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(n,e||t.get);var o=n.stack;return Error.prepareStackTrace=s,Error.stackTraceLimit=r,o},t.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map((function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var r=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(r){var n=null,s=null,o=null,i=null,a=null,u="native"===r[5];if(r[1]){var c=(o=r[1]).lastIndexOf(".");if("."==o[c-1]&&c--,c>0){n=o.substr(0,c),s=o.substr(c+1);var l=n.indexOf(".Module");l>0&&(o=o.substr(l+1),n=n.substr(0,l))}i=null}s&&(i=n,a=s),"<anonymous>"===s&&(a=null,o=null);var d={fileName:r[2]||null,lineNumber:parseInt(r[3],10)||null,functionName:o,typeName:i,methodName:a,columnNumber:parseInt(r[4],10)||null,native:u};return t._createParsedCallSite(d)}})).filter((function(e){return!!e}))},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach((function(e){r.prototype[e]=null,r.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),["topLevel","eval","native","constructor"].forEach((function(e){r.prototype[e]=!1,r.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),t._createParsedCallSite=function(e){return new r(e)}},9273:(e,t)=>{"use strict";t.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},t.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},5243:(e,t,r)=>{"use strict";Object.defineProperty(t,"cli",{value:r(9273)}),Object.defineProperty(t,"npm",{value:r(2459)}),Object.defineProperty(t,"syslog",{value:r(1945)})},2459:(e,t)=>{"use strict";t.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},t.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},1945:(e,t)=>{"use strict";t.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},t.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},5396:(e,t,r)=>{"use strict";Object.defineProperty(t,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(t,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(t,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(t,"configs",{value:r(5243)})},505:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(752)),o=n(r(566)),i=n(r(1)),a=n(r(37)).default.cpus().length,u=(0,o.default)(process.argv.slice(2)),c=(0,o.default)(process.argv.slice(3)),l=u._[0]||8080;if(s.default.get("/info",((e,t)=>{const r={"Argumentos de entrada":process.argv,"Nombre de la plataforma: ":process.platform,"Versi√≥n de Node: ":process.version,"Memoria total reservada":process.memoryUsage().heapTotal,"Path de ejecuci√≥n":process.execPath,"Process id":process.pid,"N√∫mero de procesadores presentes en el servidor":"CLUSTER"===c._[0]?a:1,"Carpeta del proyecto":__dirname};t.json(r)})),"CLUSTER"===c._[0])if(i.default.isPrimary){console.log("Master cluster setting up");for(let e=0;e<a;e++)i.default.fork();i.default.on("exit",(e=>{console.log(`worker ${e.process.pid} died`)}))}else s.default.listen(l,(()=>{console.log(`Servidor corriendo en http://localhost:${l}`)})),console.log(`Worker ${process.pid} started`);else s.default.listen(l,(()=>{console.log(`Servidor corriendo en http://localhost:${l}`)}))},752:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0,r(81);const s=n(r(860)),o=r(493),i=n(r(114)),a=n(r(422)),u=n(r(455)),c=n(r(508)),l=n(r(511)),d=r(55),h=n(r(96)),f=n(r(12)),p=n(r(1440)),g=(0,s.default)();function m(e){return h.default.hashSync(e,h.default.genSaltSync(10),null)}t.logger=p.default.createLogger({level:"warn",transports:[new p.default.transports.Console({level:"info"}),new p.default.transports.File({filename:"warn.log",level:"warn"}),new p.default.transports.File({filename:"error.log",level:"error"})]}),g.use((0,u.default)()),g.use("/api/carrito",(new i.default).router),g.use("/api/productos",(new a.default).router),g.use((0,c.default)({secret:"secreto",cookie:{httpOnly:!1,secure:!1,maxAge:6e5},rolling:!0,resave:!0,saveUninitialized:!1})),g.use(l.default.initialize()),g.use(l.default.session()),g.set("views","./views"),g.set("view engine","ejs"),l.default.use("login",new d.Strategy(((e,t,r)=>{f.default.findOne({username:e},((e,n)=>e?r(e):n?function(e,t){return h.default.compareSync(t,e.password)}(n,t)?r(null,n):(console.log("Contrase√±a incorrecta"),r(null,!1)):(console.log("Usuario no encontrado"),r(null,!1))))}))),l.default.use("signup",new d.Strategy({passReqToCallback:!0},((e,t,r,n)=>{f.default.findOne({username:t},((e,s)=>{if(e)return n(e);if(s)return console.log("Usuario ya existe"),n(null,!1);const o=new f.default({username:t,password:m(r)});o.save((e=>e?n(e):n(null,o)))}))}))),l.default.serializeUser((({_id:e},t)=>{t(null,e)})),l.default.deserializeUser(((e,t)=>{f.default.findById(e,((e,r)=>e?t(e):t(null,r)))})),g.get("/register",((e,t)=>{t.render("register")})),g.post("/register",l.default.authenticate("signup",{successRedirect:"/login",failureRedirect:"/failregister"})),g.get("/failregister",((e,t)=>{t.render("failregister")})),g.get("/login",((e,t)=>{t.render("login")})),g.post("/login",l.default.authenticate("login",{successRedirect:"/",failureRedirect:"/faillogin"})),g.get("/faillogin",((e,t)=>{t.render("faillogin")})),g.get("/logout",((e,t)=>{if(e.user){const{username:r}=e.user;return e.logOut((e=>e?t.redirect("/login"):t.render("logout",{username:r})))}t.redirect("/login")})),g.get("*",((e,r)=>{t.logger.warn("Ruta no existente"),r.send("Ruta no existente")})),g.get("/api/randoms",((e,t)=>{const{cant:r}=e.query,n=(0,o.fork)("./src/calculation.js");n.send({cant:r}),n.on("message",(e=>{t.json(e)}))})),t.default=g},802:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){"true"===e.headers.admin?r():t.status(401).json({error:"No autorizado"})}},913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serviceAccount=t.sqlite3=t.mariadb=t.mongoDbKey=void 0,r(81),t.mongoDbKey=process.env.MONGO||"mongodb://localhost:27017/ecommerce",t.mariadb={client:"mysql",connection:{host:"127.0.0.1",user:"root",password:"",database:"ecommerce"}},t.sqlite3={client:"sqlite3",connection:{filename:"./src/db/mydb.sqlite"},useNullAsDefault:!0},t.serviceAccount={type:process.env.FIREBASE_type,project_id:process.env.FIREBASE_project_id,private_key_id:process.env.FIREBASE_private_key_id,private_key:process.env.FIREBASE_private_key,client_email:process.env.FIREBASE_client_email,client_id:process.env.FIREBASE_client_id,auth_uri:process.env.FIREBASE_auth_uri,token_uri:process.env.FIREBASE_token_uri,auth_provider_x509_cert_url:process.env.FIREBASE_auth_provider_x509_cert_url,client_x509_cert_url:process.env.FIREBASE_client_x509_cert_url}},89:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=r(147);t.default=class{constructor(e){this.fileName=e,this.config=`./db/${e}`,this.fs=s.promises}createIfNotExist(){return n(this,void 0,void 0,(function*(){try{return yield s.promises.readFile(this.config)}catch(e){if("ENOENT"===e.code)return yield s.promises.writeFile(this.config,"[]").then((()=>{console.log(`No existe ${this.fileName}. Archivo creado.`)})),yield s.promises.readFile(this.config);console.log("Hubo un error",e)}return null}))}}},627:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(509));t.default=class{constructor(e){this.config=e,this.admin=s.default}connect(){s.default.initializeApp({credential:s.default.credential.cert(this.config)}),console.log("Firebase connected")}}},231:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(514));t.default=class{constructor(e){this.knex=(0,s.default)(e)}}},135:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(185));t.default=class{constructor(e){this.config=e}connect(){return n(this,void 0,void 0,(function*(){try{yield o.default.connect(this.config),console.log("MongoDB connected")}catch(e){console.log("MongoDB connection error",e)}}))}}},817:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=r(971);t.default=class{constructor(){this.postCart=this.postCart.bind(this),this.deleteCart=this.deleteCart.bind(this),this.getCart=this.getCart.bind(this),this.postProduct=this.postProduct.bind(this),this.deleteProduct=this.deleteProduct.bind(this)}postCart(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield s.daoCarts.postCart(e.body);return(yield s.daoCarts.getCart(r.id))?t.json(`El carrito con el id:${r.id} ha sido agregado`):t.json({error:"no se pudo agregar el carrito"})}catch(e){return t.status(500).json({error:e.message})}}))}deleteCart(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield s.daoCarts.getCart(e.params.id);return r?(yield s.daoCarts.deleteCart(r),t.json(`El carrito con el id:${r.id} ha sido eliminado`)):t.json({error:`el carrito con el id:${e.params.id} no existe`})}catch(e){return t.status(500).json({error:e.message})}}))}getCart(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield s.daoCarts.getCart(e.params.id);return r?t.json(r):t.json({error:`el carrito con el id:${e.params.id} no existe`})}catch(e){return t.status(500).json({error:e.message})}}))}postProduct(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield s.daoCarts.getCart(e.params.id);if(r){const n=yield s.daoCarts.postProduct(r,e.body);return n?t.json(`El producto con el id:${n.id} ha sido agregado`):t.json({error:`el producto no pudo ser agregado al carrito con el id:${e.params.id}`})}return t.json({error:`el carrito con el id:${e.params.id} no existe`})}catch(e){return t.status(500).json({error:e.message})}}))}deleteProduct(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield s.daoCarts.getCart(e.params.id);if(r){const n=yield s.daoCarts.deleteProduct(r,e.params.id_prod);return n?t.json(`El producto con el id:${n.id} ha sido eliminado`):t.json({error:`el producto con el id:${e.params.id_prod} no existe en el carrito con el id:${e.params.id}`})}return t.json({error:`el carrito con el id:${e.params.id}`})}catch(e){return t.status(500).json({error:e.message})}}))}}},243:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=r(971),o=r(752);t.default=class{constructor(){this.getProducts=this.getProducts.bind(this),this.postProduct=this.postProduct.bind(this),this.getProduct=this.getProduct.bind(this),this.putProduct=this.putProduct.bind(this),this.deleteProduct=this.deleteProduct.bind(this)}getProducts(e,t){return n(this,void 0,void 0,(function*(){if(e.params.id)try{const r=yield s.daoProducts.getProduct(e.params.id);return r?t.json(r):t.json({error:`el producto con el id:${e.params.id} no existe`})}catch(e){return o.logger.error(e.message),t.status(500).json({message:e.message})}else try{const e=yield s.daoProducts.getProducts();return e?t.json(e):t.json({error:"no hay productos"})}catch(e){return o.logger.error(e.message),t.status(500).json({message:e.message})}}))}getProduct(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield s.daoProducts.getProduct(e.params.id);return r?t.json(r):t.json({error:`el producto con el id:${e.params.id} no existe`})}catch(e){return o.logger.error(e.message),t.status(500).json({message:e.message})}}))}postProduct(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield s.daoProducts.postProduct(e.body);return(yield s.daoProducts.getProduct(r.id))?t.json(`El producto con el id:${r.id} ha sido creado`):t.json({error:"no se pudo crear el producto"})}catch(e){return o.logger.error(e.message),t.status(500).json({message:e.message})}}))}putProduct(e,t){return n(this,void 0,void 0,(function*(){try{if(yield s.daoProducts.getProduct(e.params.id)){const r=yield s.daoProducts.putProduct(e.params.id,e.body);return t.json(`El producto con el id:${r.id} ha sido actualizado`)}return t.json({error:`el producto con el id:${e.params.id} no existe`})}catch(e){return o.logger.error(e.message),t.status(500).json({message:e.message})}}))}deleteProduct(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield s.daoProducts.getProduct(e.params.id);return r?(yield s.daoProducts.deleteProduct(r),t.json(`El producto con el id:${r.id} ha sido eliminado`)):t.json({error:`el producto con el id:${e.params.id} no existe`})}catch(e){return o.logger.error(e.message),t.status(500).json({message:e.message})}}))}}},808:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(89));class i extends o.default{constructor(e){super(e)}getCarts(){return n(this,void 0,void 0,(function*(){const e=yield this.createIfNotExist();return e?JSON.parse(e.toString()):e}))}getCart(e){return n(this,void 0,void 0,(function*(){const t=yield this.getCarts(),r=parseInt(e);return t.find((e=>e.id===r))}))}postCart(e){return n(this,void 0,void 0,(function*(){const t=yield this.getCarts(),r={timestamp:(new Date).toString(),products:e};return t.length?r.id=t[t.length-1].id+1:r.id=1,t.push(r),yield this.fs.writeFile(this.config,JSON.stringify(t)),r}))}deleteCart({id:e}){return n(this,void 0,void 0,(function*(){const t=yield this.getCarts(),r=parseInt(e),n=t.filter((e=>e.id!==r));this.fs.writeFile(this.config,JSON.stringify(n))}))}postProduct(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.getCarts(),n=r.find((t=>t.id===e.id));return n?(n.products.push(t),yield this.fs.writeFile(this.config,JSON.stringify(r)),t=e.products.find((e=>e.id===t.id))):null}))}deleteProduct(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.getCarts(),n=parseInt(t),s=r.find((t=>t.id===e.id));return!!s&&(s.products.filter((e=>e.id!==n)),this.fs.writeFile(this.config,JSON.stringify(r)),!0)}))}}t.default=i},792:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(627));class i extends o.default{constructor(e){super(e),this.connect(),this.db=this.admin.firestore(),this.query=this.db.collection("carts")}postCart(e){return n(this,void 0,void 0,(function*(){const t={timestamp:(new Date).toString(),products:[]};e&&!e.length?t.products.push(e):e.length&&(t.products=e);const r=this.query.doc(),n=r._path.segments[1];yield r.create(t);const s=yield this.getCart(n);if(s.products)return s}))}deleteCart(e){return n(this,void 0,void 0,(function*(){const t=this.query.doc(e.id);e.products&&(yield t.delete())}))}getCart(e){return n(this,void 0,void 0,(function*(){const t=yield this.query.doc(e),r=yield t.get(),n=Object.assign({id:t.id},r.data());if(n.title)return n}))}postProduct(e,t){return n(this,void 0,void 0,(function*(){const r=this.admin.firestore.FieldValue.arrayUnion,n=this.query.doc(e.id);return e.products?(yield n.update({products:r(t)}),t):t}))}deleteProduct(e,t){return n(this,void 0,void 0,(function*(){const r=this.query.doc(e.id);let n;if(e.products&&(n=e.products.find((e=>e.id===t))),n){const e=this.admin.firestore.FieldValue.arrayRemove;return yield r.update({products:e(n)}),n}return n}))}}t.default=i},303:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(135)),i=r(794),a=r(752);class u extends o.default{constructor(e){super(e),this.connect()}postCart(e){return n(this,void 0,void 0,(function*(){const t=new i.Cart;return yield t.save(((t,r)=>{t&&a.logger.error(t),r.products=e,r.save()})),t}))}deleteCart({id:e}){return n(this,void 0,void 0,(function*(){yield i.Cart.findByIdAndRemove(e)}))}getCart(e){return n(this,void 0,void 0,(function*(){return yield i.Cart.findById(e)}))}postProduct({id:e},t){return n(this,void 0,void 0,(function*(){let r;return yield i.Cart.findByIdAndUpdate(e,{$push:{products:t}},{new:!0}).then((e=>{e&&(r=e.products.find((e=>e._id==t._id)))})),r}))}deleteProduct({id:e},t){return n(this,void 0,void 0,(function*(){let r;return yield i.Cart.findByIdAndUpdate(e,{$pull:{products:{_id:t}}}).then((e=>{e&&(r=e.products.find((e=>e._id==t)))})),r}))}}t.default=u},526:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(231));class i extends o.default{constructor(e){super(e)}createIfNotExists(){return n(this,void 0,void 0,(function*(){try{yield this.knex.schema.createTable("carts",(e=>{e.increments("id"),e.string("title"),e.timestamp("timestamp")}))}catch(e){console.log(e.sqlMessage)}}))}createIfNotExistsProducts(){return n(this,void 0,void 0,(function*(){try{yield this.knex.schema.createTable("carts_products",(e=>{e.integer("id"),e.integer("cart_id"),e.string("title"),e.string("description"),e.string("thumbnail"),e.float("price"),e.integer("stock"),e.string("timestamp")}))}catch(e){console.log(e.sqlMessage)}}))}postCart(e){return n(this,void 0,void 0,(function*(){yield this.createIfNotExists(),yield this.createIfNotExistsProducts();const t=yield this.knex("carts").insert({title:"Carrito"});return e.forEach((e=>{e.cart_id=t[0]})),yield this.knex("carts_products").insert(e),this.getCart(t[0].toString())}))}deleteCart({id:e}){return n(this,void 0,void 0,(function*(){yield this.knex("carts_products").where("cart_id",e).del(),yield this.knex("carts").where("id",e).del()}))}getCart(e){return n(this,void 0,void 0,(function*(){try{const t=(yield this.knex.from("carts").select("*").where("id",e))[0];return t.products=yield this.knex.from("carts_products").select("*").where("cart_id",e),t}catch(e){return console.log(e.sqlMessage),!1}}))}postProduct(e,t){return n(this,void 0,void 0,(function*(){return e.products&&(t.cart_id=e.id),yield this.knex("carts_products").insert(t),t}))}deleteProduct(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.knex.from("carts_products").select("*").where("id",t).andWhere("cart_id",e.id);return yield this.knex("carts_products").where("id",t).andWhere("cart_id",e.id).del(),r[0]}))}}t.default=i},971:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.daoProducts=t.daoCarts=void 0,r(81);const i=r(913);let a,u;switch(t.daoCarts=a,t.daoProducts=u,process.env.DB){case"mariaSql":Promise.resolve().then((()=>o(r(526)))).then((({default:e})=>{t.daoCarts=a=new e(i.sqlite3)})),Promise.resolve().then((()=>o(r(470)))).then((({default:e})=>{t.daoProducts=u=new e(i.mariadb)}));break;case"mongoDb":Promise.resolve().then((()=>o(r(303)))).then((({default:e})=>{t.daoCarts=a=new e(i.mongoDbKey)})),Promise.resolve().then((()=>o(r(179)))).then((({default:e})=>{t.daoProducts=u=new e(i.mongoDbKey)}));break;case"firebase":Promise.resolve().then((()=>o(r(792)))).then((({default:e})=>{t.daoCarts=a=new e(i.serviceAccount)})),Promise.resolve().then((()=>o(r(593)))).then((({default:e})=>{t.daoProducts=u=new e(i.serviceAccount)}));break;default:Promise.resolve().then((()=>o(r(808)))).then((({default:e})=>{t.daoCarts=a=new e("carts.json")})),Promise.resolve().then((()=>o(r(722)))).then((({default:e})=>{t.daoProducts=u=new e("products.json")}))}},722:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(89));class i extends o.default{constructor(e){super(e)}getProducts(){return n(this,void 0,void 0,(function*(){const e=yield this.createIfNotExist();return e?JSON.parse(e.toString()):e}))}postProduct(e){return n(this,void 0,void 0,(function*(){const t=yield this.getProducts();return t.length?e.id=t[t.length-1].id+1:e.id=1,e.timestamp=(new Date).toString(),t.push(e),yield this.fs.writeFile(this.config,JSON.stringify(t)),e}))}getProduct(e){return n(this,void 0,void 0,(function*(){const t=parseInt(e);return(yield this.getProducts()).find((e=>e.id===t))}))}putProduct(e,t){return n(this,void 0,void 0,(function*(){const r=parseInt(e),n=(yield this.getProducts()).filter((e=>e.id!==r));return t.id=r,n.push(t),yield this.fs.writeFile(this.config,JSON.stringify(n)),t}))}deleteProduct({id:e}){return n(this,void 0,void 0,(function*(){const t=parseInt(e),r=(yield this.getProducts()).filter((e=>e.id!==t));this.fs.writeFile(this.config,JSON.stringify(r))}))}}t.default=i},593:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(627));class i extends o.default{constructor(e){super(e),this.db=this.admin.firestore(),this.query=this.db.collection("products")}getProducts(){return n(this,void 0,void 0,(function*(){return(yield this.query.get()).docs.map((e=>Object.assign({id:e.id},e.data())))}))}postProduct(e){return n(this,void 0,void 0,(function*(){e.timestamp=(new Date).toString();const t=this.query.doc(),r=t._path.segments[1];yield t.create(e);const n=yield this.getProduct(r);if(n.title)return n}))}getProduct(e){return n(this,void 0,void 0,(function*(){const t=this.query.doc(e),r=yield t.get(),n=Object.assign({id:t.id},r.data());if(n.title)return n}))}putProduct(e,t){return n(this,void 0,void 0,(function*(){const r=this.query.doc(e);yield r.update(t);const n=yield this.getProduct(e);if(n.title)return n}))}deleteProduct(e){return n(this,void 0,void 0,(function*(){const t=this.query.doc(e.id);return!!e.title&&(yield t.delete(),!0)}))}}t.default=i},470:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(231));class i extends o.default{constructor(e){super(e)}createIfNotExists(){return n(this,void 0,void 0,(function*(){try{yield this.knex.schema.createTable("products",(e=>{e.increments("id"),e.string("title"),e.string("description"),e.string("thumbnail"),e.float("price"),e.integer("stock"),e.timestamp("timestamp")}))}catch(e){console.log(e.sqlMessage)}}))}getProducts(){return n(this,void 0,void 0,(function*(){return yield this.knex.from("products").select("*")}))}postProduct(e){return n(this,void 0,void 0,(function*(){yield this.createIfNotExists();const t=yield this.knex("products").insert(e);return yield this.getProduct(t[0].toString())}))}getProduct(e){return n(this,void 0,void 0,(function*(){return(yield this.knex.from("products").select("*").where("id",e))[0]}))}putProduct(e,t){return n(this,void 0,void 0,(function*(){return yield this.knex("products").where("id",e).update(t),yield this.getProduct(e)}))}deleteProduct({id:e}){return n(this,void 0,void 0,(function*(){yield this.knex("products").where("id",e).del()}))}}t.default=i},179:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(135)),i=r(489);class a extends o.default{constructor(e){super(e)}getProducts(){return n(this,void 0,void 0,(function*(){return yield i.Product.find({})}))}postProduct(e){return n(this,void 0,void 0,(function*(){const t=new i.Product(e);return yield t.save()}))}getProduct(e){return n(this,void 0,void 0,(function*(){return yield i.Product.findById(e)}))}putProduct(e,t){return n(this,void 0,void 0,(function*(){return yield i.Product.findByIdAndUpdate(e,t)}))}deleteProduct({id:e}){return n(this,void 0,void 0,(function*(){return yield i.Product.findByIdAndRemove(e)}))}}t.default=a},794:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Cart=void 0;const s=n(r(185)),o=r(489),i=new s.default.Schema({products:[o.productSchema],timestamp:{type:String,default:(new Date).toString()}});t.Cart=s.default.model("carts",i)},489:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Product=t.productSchema=void 0;const s=n(r(185));t.productSchema=new s.default.Schema({title:{type:String,required:!0},description:{type:String,required:!0},thumbnail:{type:String,required:!0},price:{type:Number,required:!0},timestamp:{type:String,default:(new Date).toString()},stock:{type:Number,required:!0}}),t.Product=s.default.model("products",t.productSchema)},12:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(185),s=new n.Schema({username:{type:String,required:!0},password:{type:String,required:!0}}),o=(0,n.model)("users",s);t.default=o},114:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(860),o=n(r(817)),i=(0,s.Router)();t.default=class{constructor(){this.router=i,this.cartsController=new o.default,i.use((0,s.json)()),i.use((0,s.urlencoded)({extended:!0})),i.post("/",this.cartsController.postCart),i.delete("/:id",this.cartsController.deleteCart),i.get("/:id/productos",this.cartsController.getCart),i.post("/:id/productos",this.cartsController.postProduct),i.delete("/:id/productos/:id_prod",this.cartsController.deleteProduct)}}},422:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(860),o=n(r(243)),i=n(r(802)),a=(0,s.Router)();t.default=class{constructor(){this.router=a,this.productsController=new o.default,a.use((0,s.json)()),a.use((0,s.urlencoded)({extended:!0})),a.get("/:id?",this.productsController.getProducts),a.post("/",i.default,this.productsController.postProduct),a.put("/:id",i.default,this.productsController.putProduct),a.delete("/:id",i.default,this.productsController.deleteProduct)}}},1037:(e,t,r)=>{"use strict";const n=r(3837),s=r(3647),{LEVEL:o}=r(5396),i=e.exports=function(e={}){s.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",(e=>{this.levels=e.levels,this.parent=e})),this.once("unpipe",(e=>{e===this.parent&&(this.parent=null,this.close&&this.close())}))};n.inherits(i,s),i.prototype._write=function(e,t,r){if(this.silent||!0===e.exception&&!this.handleExceptions)return r(null);const n=this.level||this.parent&&this.parent.level;if(!n||this.levels[n]>=this.levels[e[o]]){if(e&&!this.format)return this.log(e,r);let t,n;try{n=this.format.transform(Object.assign({},e),this.format.options)}catch(e){t=e}if(t||!n){if(r(),t)throw t;return}return this.log(n,r)}return this._writableState.sync=!1,r(null)},i.prototype._writev=function(e,t){if(this.logv){const r=e.filter(this._accept,this);return r.length?this.logv(r,t):t(null)}for(let r=0;r<e.length;r++){if(!this._accept(e[r]))continue;if(e[r].chunk&&!this.format){this.log(e[r].chunk,e[r].callback);continue}let n,s;try{s=this.format.transform(Object.assign({},e[r].chunk),this.format.options)}catch(e){n=e}if(n||!s){if(e[r].callback(),n)throw t(null),n}else this.log(s,e[r].callback)}return t(null)},i.prototype._accept=function(e){const t=e.chunk;if(this.silent)return!1;const r=this.level||this.parent&&this.parent.level;return!(!0!==t.exception&&r&&!(this.levels[r]>=this.levels[t[o]])||!this.handleExceptions&&!0===t.exception)},i.prototype._nop=function(){},e.exports.LegacyTransportStream=r(4201)},4201:(e,t,r)=>{"use strict";const n=r(3837),{LEVEL:s}=r(5396),o=r(1037),i=e.exports=function(e={}){if(o.call(this,e),!e.transport||"function"!=typeof e.transport.log)throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=function(e){this.emit("error",e,this.transport)}.bind(this),this.transport.on("error",this.transport.__winstonError))};n.inherits(i,o),i.prototype._write=function(e,t,r){if(this.silent||!0===e.exception&&!this.handleExceptions)return r(null);(!this.level||this.levels[this.level]>=this.levels[e[s]])&&this.transport.log(e[s],e.message,e,this._nop),r(null)},i.prototype._writev=function(e,t){for(let t=0;t<e.length;t++)this._accept(e[t])&&(this.transport.log(e[t].chunk[s],e[t].chunk.message,e[t].chunk,this._nop),e[t].callback());return t(null)},i.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join("\n"))},i.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},1440:(e,t,r)=>{"use strict";const n=r(562),{warn:s}=r(2850);t.version=r(2561).version,t.transports=r(9840),t.config=r(448),t.addColors=n.levels,t.format=n.format,t.createLogger=r(5658),t.ExceptionHandler=r(5120),t.RejectionHandler=r(5724),t.Container=r(6099),t.Transport=r(1037),t.loggers=new t.Container;const o=t.createLogger();Object.keys(t.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach((e=>t[e]=(...t)=>o[e](...t))),Object.defineProperty(t,"level",{get:()=>o.level,set(e){o.level=e}}),Object.defineProperty(t,"exceptions",{get:()=>o.exceptions}),["exitOnError"].forEach((e=>{Object.defineProperty(t,e,{get:()=>o[e],set(t){o[e]=t}})})),Object.defineProperty(t,"default",{get:()=>({exceptionHandlers:o.exceptionHandlers,rejectionHandlers:o.rejectionHandlers,transports:o.transports})}),s.deprecated(t,"setLevels"),s.forFunctions(t,"useFormat",["cli"]),s.forProperties(t,"useFormat",["padLevels","stripColors"]),s.forFunctions(t,"deprecated",["addRewriter","addFilter","clone","extend"]),s.forProperties(t,"deprecated",["emitErrs","levelLength"]),s.moved(t,"createLogger","Logger")},2850:(e,t,r)=>{"use strict";const{format:n}=r(3837);t.warn={deprecated:e=>()=>{throw new Error(n("{ %s } was removed in winston@3.0.0.",e))},useFormat:e=>()=>{throw new Error([n("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join("\n"))},forFunctions(e,r,n){n.forEach((n=>{e[n]=t.warn[r](n)}))},moved(e,t,r){function s(){return()=>{throw new Error([n("winston.%s was moved in winston@3.0.0.",r),n("Use a winston.%s instead.",t)].join("\n"))}}Object.defineProperty(e,r,{get:s,set:s})},forProperties(e,r,n){n.forEach((n=>{const s=t.warn[r](n);Object.defineProperty(e,n,{get:s,set:s})}))}}},448:(e,t,r)=>{"use strict";const n=r(562),{configs:s}=r(5396);t.cli=n.levels(s.cli),t.npm=n.levels(s.npm),t.syslog=n.levels(s.syslog),t.addColors=n.levels},6099:(e,t,r)=>{"use strict";const n=r(5658);e.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,t){if(!this.loggers.has(e)){const r=(t=Object.assign({},t||this.options)).transports||this.options.transports;t.transports=r?r.slice():[];const s=n(t);s.on("close",(()=>this._delete(e))),this.loggers.set(e,s)}return this.loggers.get(e)}get(e,t){return this.add(e,t)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach(((e,t)=>this._removeLogger(t)))}_removeLogger(e){this.loggers.has(e)&&(this.loggers.get(e).close(),this._delete(e))}_delete(e){this.loggers.delete(e)}}},5658:(e,t,r)=>{"use strict";const{LEVEL:n}=r(5396),s=r(448),o=r(9848),i=r(3420)("winston:create-logger");e.exports=function(e={}){e.levels=e.levels||s.npm.levels;class t extends o{constructor(e){super(e)}}const r=new t(e);return Object.keys(e.levels).forEach((function(e){i('Define prototype method for "%s"',e),"log"!==e?(t.prototype[e]=function(...t){const s=this||r;if(1===t.length){const[o]=t,i=o&&o.message&&o||{message:o};return i.level=i[n]=e,s._addDefaultMeta(i),s.write(i),this||r}return 0===t.length?(s.log(e,""),s):s.log(e,...t)},t.prototype[function(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}(e)]=function(){return(this||r).isLevelEnabled(e)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')})),r}},5120:(e,t,r)=>{"use strict";const n=r(37),s=r(8058),o=r(3420)("winston:exception"),i=r(3138),a=r(7911),u=r(5193);e.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach((e=>{if(Array.isArray(e))return e.forEach((e=>this._addHandler(e)));this._addHandler(e)})),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach((e=>this.logger.unpipe(e))))}getAllInfo(e){let{message:t}=e;return t||"string"!=typeof e||(t=e),{error:e,level:"error",message:[`uncaughtException: ${t||"(no error message)"}`,e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:n.loadavg(),uptime:n.uptime()}}getTrace(e){return(e?a.parse(e):a.get()).map((e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()})))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;const t=new u(e);this.handlers.set(e,t),this.logger.pipe(t)}}_uncaughtException(e){const t=this.getAllInfo(e),r=this._getExceptionHandlers();let n,a="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function u(){o("doExit",a),o("process._exiting",process._exiting),a&&!process._exiting&&(n&&clearTimeout(n),process.exit(1))}if(!r.length&&a&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),a=!1),!r||0===r.length)return process.nextTick(u);s(r,((e,t)=>{const r=i(t),n=e.transport||e;function s(e){return()=>{o(e),r()}}n._ending=!0,n.once("finish",s("finished")),n.once("error",s("error"))}),(()=>a&&u())),this.logger.log(t),a&&(n=setTimeout(u,3e3))}_getExceptionHandlers(){return this.logger.transports.filter((e=>(e.transport||e).handleExceptions))}}},5193:(e,t,r)=>{"use strict";const{Writable:n}=r(3248);e.exports=class extends n{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,t,r){return e.exception?this.transport.log(e,r):(r(),!0)}}},9848:(e,t,r)=>{"use strict";const{Stream:n,Transform:s}=r(3248),o=r(8058),{LEVEL:i,SPLAT:a}=r(5396),u=r(2394),c=r(5120),l=r(5724),d=r(4201),h=r(46),{warn:f}=r(2850),p=r(448),g=/%[scdjifoO%]/g;class m extends s{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){const t=this;return Object.create(t,{write:{value:function(r){const n=Object.assign({},e,r);r instanceof Error&&(n.stack=r.stack,n.message=r.message),t.write(n)}}})}configure({silent:e,format:t,defaultMeta:n,levels:s,level:o="info",exitOnError:i=!0,transports:a,colors:u,emitErrs:d,formatters:h,padLevels:f,rewriters:g,stripColors:m,exceptionHandlers:v,rejectionHandlers:y}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=t||this.format||r(3922)(),this.defaultMeta=n||null,this.levels=s||this.levels||p.npm.levels,this.level=o,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new c(this),this.rejections=new l(this),this.profilers={},this.exitOnError=i,a&&(a=Array.isArray(a)?a:[a]).forEach((e=>this.add(e))),u||d||h||f||g||m)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"));v&&this.exceptions.handle(v),y&&this.rejections.handle(y)}isLevelEnabled(e){const t=v(this.levels,e);if(null===t)return!1;const r=v(this.levels,this.level);return null!==r&&(this.transports&&0!==this.transports.length?-1!==this.transports.findIndex((e=>{let n=v(this.levels,e.level);return null===n&&(n=r),n>=t})):r>=t)}log(e,t,...r){if(1===arguments.length)return e[i]=e.level,this._addDefaultMeta(e),this.write(e),this;if(2===arguments.length)return t&&"object"==typeof t?(t[i]=t.level=e,this._addDefaultMeta(t),this.write(t),this):(t={[i]:e,level:e,message:t},this._addDefaultMeta(t),this.write(t),this);const[n]=r;if("object"==typeof n&&null!==n&&!(t&&t.match&&t.match(g))){const s=Object.assign({},this.defaultMeta,n,{[i]:e,[a]:r,level:e,message:t});return n.message&&(s.message=`${s.message} ${n.message}`),n.stack&&(s.stack=n.stack),this.write(s),this}return this.write(Object.assign({},this.defaultMeta,{[i]:e,[a]:r,level:e,message:t})),this}_transform(e,t,r){if(this.silent)return r();e[i]||(e[i]=e.level),this.levels[e[i]]||0===this.levels[e[i]]||console.error("[winston] Unknown logger level: %s",e[i]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,r()}}_final(e){const t=this.transports.slice();o(t,((e,t)=>{if(!e||e.finished)return setImmediate(t);e.once("finish",t),e.end()}),e)}add(e){const t=!u(e)||e.log.length>2?new d({transport:e}):e;if(!t._writableState||!t._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",t),this._onEvent("warn",t),this.pipe(t),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let t=e;return(!u(e)||e.log.length>2)&&(t=this.transports.filter((t=>t.transport===e))[0]),t&&this.unpipe(t),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){f.deprecated("setLevels")}query(e,t){"function"==typeof e&&(t=e,e={}),e=e||{};const r={},n=Object.assign({},e.query||{});o(this.transports.filter((e=>!!e.query)),(function(t,s){!function(t,r){e.query&&"function"==typeof t.formatQuery&&(e.query=t.formatQuery(n)),t.query(e,((n,s)=>{if(n)return r(n);"function"==typeof t.formatResults&&(s=t.formatResults(s,e.format)),r(null,s)}))}(t,((e,n)=>{s&&((n=e||n)&&(r[t.name]=n),s()),s=null}))}),(()=>t(null,r)))}stream(e={}){const t=new n,r=[];return t._streams=r,t.destroy=()=>{let e=r.length;for(;e--;)r[e].destroy()},this.transports.filter((e=>!!e.stream)).forEach((n=>{const s=n.stream(e);s&&(r.push(s),s.on("log",(e=>{e.transport=e.transport||[],e.transport.push(n.name),t.emit("log",e)})),s.on("error",(e=>{e.transport=e.transport||[],e.transport.push(n.name),t.emit("error",e)})))})),t}startTimer(){return new h(this)}profile(e,...t){const r=Date.now();if(this.profilers[e]){const n=this.profilers[e];delete this.profilers[e],"function"==typeof t[t.length-2]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),t.pop());const s="object"==typeof t[t.length-1]?t.pop():{};return s.level=s.level||"info",s.durationMs=r-n,s.message=s.message||e,this.write(s)}return this.profilers[e]=r,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}_onEvent(e,t){t["__winston"+e]||(t["__winston"+e]=function(r){"error"!==e||this.transports.includes(t)||this.add(t),this.emit(e,r,t)}.bind(this),t.on(e,t["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}}function v(e,t){const r=e[t];return r||0===r?r:null}Object.defineProperty(m.prototype,"transports",{configurable:!1,enumerable:!0,get(){const{pipes:e}=this._readableState;return Array.isArray(e)?e:[e].filter(Boolean)}}),e.exports=m},46:e=>{"use strict";e.exports=class{constructor(e){if(!e)throw new Error("Logger is required for profiling.");this.logger=e,this.start=Date.now()}done(...e){"function"==typeof e[e.length-1]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());const t="object"==typeof e[e.length-1]?e.pop():{};return t.level=t.level||"info",t.durationMs=Date.now()-this.start,this.logger.write(t)}}},5724:(e,t,r)=>{"use strict";const n=r(37),s=r(8058),o=r(3420)("winston:rejection"),i=r(3138),a=r(7911),u=r(5193);e.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach((e=>{if(Array.isArray(e))return e.forEach((e=>this._addHandler(e)));this._addHandler(e)})),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach((e=>this.logger.unpipe(e))))}getAllInfo(e){let t=null;return e&&(t="string"==typeof e?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${t||"(no error message)"}`,e&&e.stack||"  No stack trace"].join("\n"),stack:e&&e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:n.loadavg(),uptime:n.uptime()}}getTrace(e){return(e?a.parse(e):a.get()).map((e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()})))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;const t=new u(e);this.handlers.set(e,t),this.logger.pipe(t)}}_unhandledRejection(e){const t=this.getAllInfo(e),r=this._getRejectionHandlers();let n,a="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function u(){o("doExit",a),o("process._exiting",process._exiting),a&&!process._exiting&&(n&&clearTimeout(n),process.exit(1))}if(!r.length&&a&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),a=!1),!r||0===r.length)return process.nextTick(u);s(r,((e,t)=>{const r=i(t),n=e.transport||e;function s(e){return()=>{o(e),r()}}n._ending=!0,n.once("finish",s("finished")),n.once("error",s("error"))}),(()=>a&&u())),this.logger.log(t),a&&(n=setTimeout(u,3e3))}_getRejectionHandlers(){return this.logger.transports.filter((e=>(e.transport||e).handleRejections))}}},4778:(e,t,r)=>{"use strict";const n=r(147),{StringDecoder:s}=r(6330),{Stream:o}=r(3248);function i(){}e.exports=(e,t)=>{const r=Buffer.alloc(65536),a=new s("utf8"),u=new o;let c="",l=0,d=0;return-1===e.start&&delete e.start,u.readable=!0,u.destroy=()=>{u.destroyed=!0,u.emit("end"),u.emit("close")},n.open(e.file,"a+","0644",((s,o)=>{if(s)return t?t(s):u.emit("error",s),void u.destroy();!function s(){if(!u.destroyed)return n.read(o,r,0,r.length,l,((n,o)=>{if(n)return t?t(n):u.emit("error",n),void u.destroy();if(!o)return c&&((null==e.start||d>e.start)&&(t?t(null,c):u.emit("line",c)),d++,c=""),setTimeout(s,1e3);let i=a.write(r.slice(0,o));t||u.emit("data",i),i=(c+i).split(/\n+/);const h=i.length-1;let f=0;for(;f<h;f++)(null==e.start||d>e.start)&&(t?t(null,i[f]):u.emit("line",i[f])),d++;return c=i[h],l+=o,s()}));n.close(o,i)}()})),t?u.destroy:u}},2158:(e,t,r)=>{"use strict";const n=r(37),{LEVEL:s,MESSAGE:o}=r(5396),i=r(1037);e.exports=class extends i{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol="string"==typeof e.eol?e.eol:n.EOL,this.setMaxListeners(30)}log(e,t){return setImmediate((()=>this.emit("logged",e))),this.stderrLevels[e[s]]?(console._stderr?console._stderr.write(`${e[o]}${this.eol}`):console.error(e[o]),void(t&&t())):this.consoleWarnLevels[e[s]]?(console._stderr?console._stderr.write(`${e[o]}${this.eol}`):console.warn(e[o]),void(t&&t())):(console._stdout?console._stdout.write(`${e[o]}${this.eol}`):console.log(e[o]),void(t&&t()))}_stringArrayToSet(e,t){if(!e)return{};if(t=t||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(t);return e.reduce(((e,r)=>{if("string"!=typeof r)throw new Error(t);return e[r]=!0,e}),{})}}},9140:(e,t,r)=>{"use strict";const n=r(147),s=r(1017),o=r(8415),i=r(9796),{MESSAGE:a}=r(5396),{Stream:u,PassThrough:c}=r(3248),l=r(1037),d=r(3420)("winston:file"),h=r(37),f=r(4778);e.exports=class extends l{constructor(e={}){function t(t,...r){r.slice(1).forEach((r=>{if(e[r])throw new Error(`Cannot set ${r} and ${t} together`)}))}if(super(e),this.name=e.name||"file",this._stream=new c,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)t("filename or dirname","stream"),this._basename=this.filename=e.filename?s.basename(e.filename):"winston.log",this.dirname=e.dirname||s.dirname(e.filename),this.options=e.options||{flags:"a"};else{if(!e.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),t("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=s.dirname(this._dest.path)}this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol="string"==typeof e.eol?e.eol:h.EOL,this.tailable=e.tailable||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",(()=>{this._stream.once("finish",(()=>this.emit("finish"))),setImmediate((()=>this._stream.end()))})):(this._stream.once("finish",(()=>this.emit("finish"))),setImmediate((()=>this._stream.end()))))}log(e,t=(()=>{})){if(this.silent)return t(),!0;if(this._drain)return void this._stream.once("drain",(()=>{this._drain=!1,this.log(e,t)}));if(this._rotate)return void this._stream.once("rotate",(()=>{this._rotate=!1,this.log(e,t)}));const r=`${e[a]}${this.eol}`,n=Buffer.byteLength(r);this._pendingSize+=n,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);const s=this._stream.write(r,function(){this._size+=n,this._pendingSize-=n,d("logged %s %s",this._size,r),this.emit("logged",e),this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream((()=>this._rotateFile())))}.bind(this));return s?t():(this._drain=!0,this._stream.once("drain",(()=>{this._drain=!1,t()}))),d("written",s,this._drain),this.finishIfEnding(),s}query(e,t){"function"==typeof e&&(t=e,e={}),e=function(e){return(e=e||{}).rows=e.rows||e.limit||10,e.start=e.start||0,e.until=e.until||new Date,"object"!=typeof e.until&&(e.until=new Date(e.until)),e.from=e.from||e.until-864e5,"object"!=typeof e.from&&(e.from=new Date(e.from)),e.order=e.order||"desc",e}(e);const r=s.join(this.dirname,this.filename);let o="",i=[],a=0;const u=n.createReadStream(r,{encoding:"utf8"});function c(t,r){try{const r=JSON.parse(t);(function(t){if(!t)return;if("object"!=typeof t)return;const r=new Date(t.timestamp);return!(e.from&&r<e.from||e.until&&r>e.until||e.level&&e.level!==t.level)||void 0})(r)&&function(t){e.rows&&i.length>=e.rows&&"desc"!==e.order?u.readable&&u.destroy():(e.fields&&(t=e.fields.reduce(((e,r)=>(e[r]=t[r],e)),{})),"desc"===e.order&&i.length>=e.rows&&i.shift(),i.push(t))}(r)}catch(e){r||u.emit("error",e)}}u.on("error",(e=>{if(u.readable&&u.destroy(),t)return"ENOENT"!==e.code?t(e):t(null,i)})),u.on("data",(t=>{const r=(t=(o+t).split(/\n+/)).length-1;let n=0;for(;n<r;n++)(!e.start||a>=e.start)&&c(t[n]),a++;o=t[r]})),u.on("close",(()=>{o&&c(o,!0),"desc"===e.order&&(i=i.reverse()),t&&t(null,i)}))}stream(e={}){const t=s.join(this.dirname,this.filename),r=new u,n={file:t,start:e.start};return r.destroy=f(n,((e,t)=>{if(e)return r.emit("error",e);try{r.emit("data",t),t=JSON.parse(t),r.emit("log",t)}catch(e){r.emit("error",e)}})),r}open(){this.filename&&(this._opening||(this._opening=!0,this.stat(((e,t)=>{if(e)return this.emit("error",e);d("stat done: %s { size: %s }",this.filename,t),this._size=t,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",(()=>{this._stream.eventNames().includes("rotate")?this._stream.emit("rotate"):this._rotate=!1}))}))))}stat(e){const t=this._getFile(),r=s.join(this.dirname,t);n.stat(r,((n,s)=>n&&"ENOENT"===n.code?(d("ENOENT¬†ok",r),this.filename=t,e(null,0)):n?(d(`err ${n.code} ${r}`),e(n)):!s||this._needsNewFile(s.size)?this._incFile((()=>this.stat(e))):(this.filename=t,void e(null,s.size))))}close(e){this._stream&&this._stream.end((()=>{e&&e(),this.emit("flush"),this.emit("closed")}))}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e}_rotateFile(){this._incFile((()=>this.open()))}_endStream(e=(()=>{})){this._dest?(this._stream.unpipe(this._dest),this._dest.end((()=>{this._cleanupStream(this._dest),e()}))):e()}_createStream(e){const t=s.join(this.dirname,this.filename);d("create stream start",t,this.options);const r=n.createWriteStream(t,this.options).on("error",(e=>d(e))).on("close",(()=>d("close",r.path,r.bytesWritten))).on("open",(()=>{d("file open ok",t),this.emit("open",t),e.pipe(r),this.rotatedWhileOpening&&(this._stream=new c,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(r),e.end())}));if(d("create stream ok",t),this.zippedArchive){const e=i.createGzip();return e.pipe(r),e}return r}_incFile(e){d("_incFile",this.filename);const t=s.extname(this._basename),r=s.basename(this._basename,t);this.tailable?this._checkMaxFilesTailable(t,r,e):(this._created+=1,this._checkMaxFilesIncrementing(t,r,e))}_getFile(){const e=s.extname(this._basename),t=s.basename(this._basename,e),r=this.rotationFormat?this.rotationFormat():this._created,n=!this.tailable&&this._created?`${t}${r}${e}`:`${t}${e}`;return this.zippedArchive&&!this.tailable?`${n}.gz`:n}_checkMaxFilesIncrementing(e,t,r){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(r);const o=this._created-this.maxFiles,i=`${t}${0!==o?o:""}${e}${this.zippedArchive?".gz":""}`,a=s.join(this.dirname,i);n.unlink(a,r)}_checkMaxFilesTailable(e,t,r){const i=[];if(!this.maxFiles)return;const a=this.zippedArchive?".gz":"";for(let r=this.maxFiles-1;r>1;r--)i.push(function(r,o){let i=`${t}${r-1}${e}${a}`;const u=s.join(this.dirname,i);n.exists(u,(c=>{if(!c)return o(null);i=`${t}${r}${e}${a}`,n.rename(u,s.join(this.dirname,i),o)}))}.bind(this,r));o(i,(()=>{n.rename(s.join(this.dirname,`${t}${e}`),s.join(this.dirname,`${t}1${e}${a}`),r)}))}_createLogDirIfNotExist(e){n.existsSync(e)||n.mkdirSync(e,{recursive:!0})}}},1734:(e,t,r)=>{"use strict";const n=r(3685),s=r(5687),{Stream:o}=r(3248),i=r(1037),a=r(7668);e.exports=class extends i{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,t){this._request(e,((t,r)=>{r&&200!==r.statusCode&&(t=new Error(`Invalid HTTP Status Code: ${r.statusCode}`)),t?this.emit("warn",t):this.emit("logged",e)})),t&&setImmediate(t)}query(e,t){"function"==typeof e&&(t=e,e={}),(e={method:"query",params:this.normalizeQuery(e)}).params.path&&(e.path=e.params.path,delete e.params.path),e.params.auth&&(e.auth=e.params.auth,delete e.params.auth),this._request(e,((e,r,n)=>{if(r&&200!==r.statusCode&&(e=new Error(`Invalid HTTP Status Code: ${r.statusCode}`)),e)return t(e);if("string"==typeof n)try{n=JSON.parse(n)}catch(e){return t(e)}t(null,n)}))}stream(e={}){const t=new o;(e={method:"stream",params:e}).params.path&&(e.path=e.params.path,delete e.params.path),e.params.auth&&(e.auth=e.params.auth,delete e.params.auth);let r="";const n=this._request(e);return t.destroy=()=>n.destroy(),n.on("data",(e=>{const n=(e=(r+e).split(/\n+/)).length-1;let s=0;for(;s<n;s++)try{t.emit("log",JSON.parse(e[s]))}catch(e){t.emit("error",e)}r=e[n]})),n.on("error",(e=>t.emit("error",e))),t}_request(e,t){const r=(e=e||{}).auth||this.auth,n=e.path||this.path||"";delete e.auth,delete e.path,this.batch?this._doBatch(e,t,r,n):this._doRequest(e,t,r,n)}_doBatch(e,t,r,n){if(this.batchOptions.push(e),1===this.batchOptions.length){const e=this;this.batchCallback=t,this.batchTimeoutID=setTimeout((function(){e.batchTimeoutID=-1,e._doBatchRequest(e.batchCallback,r,n)}),this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,r,n)}_doBatchRequest(e,t,r){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);const n=this.batchOptions.slice();this.batchOptions=[],this._doRequest(n,e,t,r)}_doRequest(e,t,r,o){const i=Object.assign({},this.headers);r&&r.bearer&&(i.Authorization=`Bearer ${r.bearer}`);const u=(this.ssl?s:n).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${o.replace(/^\//,"")}`,headers:i,auth:r&&r.username&&r.password?`${r.username}:${r.password}`:"",agent:this.agent});u.on("error",t),u.on("response",(e=>e.on("end",(()=>t(null,e))).resume())),u.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}},9840:(e,t,r)=>{"use strict";Object.defineProperty(t,"Console",{configurable:!0,enumerable:!0,get:()=>r(2158)}),Object.defineProperty(t,"File",{configurable:!0,enumerable:!0,get:()=>r(9140)}),Object.defineProperty(t,"Http",{configurable:!0,enumerable:!0,get:()=>r(1734)}),Object.defineProperty(t,"Stream",{configurable:!0,enumerable:!0,get:()=>r(4635)})},4635:(e,t,r)=>{"use strict";const n=r(2394),{MESSAGE:s}=r(5396),o=r(37),i=r(1037);e.exports=class extends i{constructor(e={}){if(super(e),!e.stream||!n(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol="string"==typeof e.eol?e.eol:o.EOL}log(e,t){if(setImmediate((()=>this.emit("logged",e))),this.isObjectMode)return this._stream.write(e),void(t&&t());this._stream.write(`${e[s]}${this.eol}`),t&&t()}}},96:e=>{"use strict";e.exports=require("bcrypt")},455:e=>{"use strict";e.exports=require("compression")},81:e=>{"use strict";e.exports=require("dotenv/config")},860:e=>{"use strict";e.exports=require("express")},508:e=>{"use strict";e.exports=require("express-session")},509:e=>{"use strict";e.exports=require("firebase-admin")},2394:e=>{"use strict";e.exports=require("is-stream")},514:e=>{"use strict";e.exports=require("knex")},566:e=>{"use strict";e.exports=require("minimist")},185:e=>{"use strict";e.exports=require("mongoose")},3231:e=>{"use strict";e.exports=require("ms")},511:e=>{"use strict";e.exports=require("passport")},55:e=>{"use strict";e.exports=require("passport-local")},3248:e=>{"use strict";e.exports=require("readable-stream")},3647:e=>{"use strict";e.exports=require("readable-stream/lib/_stream_writable.js")},6330:e=>{"use strict";e.exports=require("string_decoder")},493:e=>{"use strict";e.exports=require("child_process")},1:e=>{"use strict";e.exports=require("cluster")},147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},37:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2561:e=>{"use strict";e.exports={version:"3.8.0"}}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(505)})();